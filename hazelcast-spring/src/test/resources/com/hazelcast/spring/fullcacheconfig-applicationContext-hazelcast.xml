<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:p="http://www.springframework.org/schema/p"
	xmlns:cache="http://www.hazelcast.com/schema/config"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
		http://www.hazelcast.com/schema/config
		http://www.hazelcast.com/schema/config/hazelcast-spring.xsd">
		
	<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
		p:systemPropertiesModeName="SYSTEM_PROPERTIES_MODE_OVERRIDE">
		<property name="locations">
			<list>
				<value>classpath:/hazelcast-default.properties</value>
			</list>
		</property>
	</bean>
	
	<bean id="string" class="java.lang.String">
		<constructor-arg><value>${cluster.group.name}</value></constructor-arg>
	</bean>

	<cache:config id="config">
		<cache:group>
			<cache:name>${cluster.group.name}</cache:name>
			<cache:password>${cluster.group.password}</cache:password>
		</cache:group>
		<cache:properties>
			<cache:property name="hazelcast.merge.first.run.delay.seconds">5</cache:property>
			<cache:property name="hazelcast.merge.next.run.delay.seconds">5</cache:property>
		</cache:properties>
		<cache:network>
			<cache:port auto-increment="false">${cluster.port}</cache:port>
			<cache:join>
				<cache:multicast enabled="false">
					<cache:multicast-group>224.2.2.3</cache:multicast-group>
					<cache:multicast-port>54327</cache:multicast-port>
				</cache:multicast>
				<cache:tcp-ip enabled="true">
					<cache:members>127.0.0.1:5800, 127.0.0.1:5801</cache:members>
				</cache:tcp-ip>
			</cache:join>
			<cache:interfaces enabled="false">
				<cache:interface>10.10.1.*</cache:interface>
			</cache:interfaces>
			<cache:symmetric-encryption enabled="true">
				<cache:algorithm>PBEWithMD5AndDES</cache:algorithm>
				<cache:salt>thesalt</cache:salt>
				<cache:password>thepass</cache:password>
				<cache:iteration-count>19</cache:iteration-count>
			</cache:symmetric-encryption>
			<cache:asymmetric-encryption enabled="false">
				<cache:algorithm></cache:algorithm>
				<cache:key-password>thekeypass</cache:key-password>
				<cache:key-alias>local</cache:key-alias>
				<cache:store-type>JKS</cache:store-type>
				<cache:store-password>thestorepass</cache:store-password>
				<cache:store-path>keystore</cache:store-path>
			</cache:asymmetric-encryption>
		</cache:network>
		<cache:executor-service name="testExec">
			<cache:core-pool-size>2</cache:core-pool-size>
			<cache:max-pool-size>32</cache:max-pool-size>
			<cache:keep-alive-seconds>30</cache:keep-alive-seconds>
		</cache:executor-service>
		<cache:queue name="testQ">
			<cache:max-size-per-jvm>1000</cache:max-size-per-jvm>
			<cache:time-to-live-seconds>0</cache:time-to-live-seconds>
		</cache:queue>
		<cache:map name="testMap">
			<cache:backup-count>2</cache:backup-count>
			<cache:eviction-policy>NONE</cache:eviction-policy>
			<cache:max-size>0</cache:max-size>
			<cache:eviction-percentage>30</cache:eviction-percentage>
			<cache:merge-policy>hz.ADD_NEW_ENTRY</cache:merge-policy>
		</cache:map>
	</cache:config>

	<bean id="hazelcastInstance"
		class="com.hazelcast.core.Hazelcast"
		factory-method="newHazelcastInstance">
		<constructor-arg ref="config" />
	</bean>
	
</beans>